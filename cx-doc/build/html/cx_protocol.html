<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CX Protocol &mdash; cx-doc v1.0 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '#',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="cx-doc v1.0 documentation" href="index.html" />
    <link rel="next" title="1   Contract Exchange Extension 1.0 - Draft 1.6" href="openid_cx_spec.html" />
    <link rel="prev" title="CX Contract" href="cx_contract.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="openid_cx_spec.html" title="1   Contract Exchange Extension 1.0 - Draft 1.6"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cx_contract.html" title="CX Contract"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">cx-doc v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="cx-protocol">
<h1>CX Protocol<a class="headerlink" href="#cx-protocol" title="Permalink to this headline">¶</a></h1>
<p>OpenID CX is a protocol which bind CX Protocl to OpenID Authentication and Extension protocols.</p>
<div class="section" id="discovering-openid-cx-service">
<h2>Discovering OpenID CX Service<a class="headerlink" href="#discovering-openid-cx-service" title="Permalink to this headline">¶</a></h2>
<p>[ToDO] Description about  Yadis / XRDS / XRD  discovery.</p>
</div>
<div class="section" id="exchange-documents-by-openid-ax">
<h2>Exchange documents by OpenID AX<a class="headerlink" href="#exchange-documents-by-openid-ax" title="Permalink to this headline">¶</a></h2>
<p>OpenID CX is an application protocol of the <a class="reference external" href="http://openid.net/specs/openid-attribute-exchange-1_0.html">OpenID AX</a> .</p>
<div class="section" id="adding-value-to-openid-ax-fetch-request">
<h3>Adding value to OpenID AX  fetch_request<a class="headerlink" href="#adding-value-to-openid-ax-fetch-request" title="Permalink to this headline">¶</a></h3>
<p>OpenID CX is the protocol to exchange non-repudiative documents between parties. To exchange documents, OpenID CX is adapting <a class="reference external" href="http://openid.net/specs/openid-attribute-exchange-1_0.html">OpenID AX</a> Extension. There are two type of requests in OpenID AX : <tt class="docutils literal"><span class="pre">fetch_request</span></tt> and <tt class="docutils literal"><span class="pre">store_request</span></tt>. Both of them can&#8217;t fit to exchaning senario, we are extending the fetch_request to convery a source value to be exchanged into a returned value in <tt class="docutils literal"><span class="pre">fetch_response</span></tt>.</p>
</div>
<div class="section" id="extendding-janrain-python-openid">
<h3>Extendding JanRain python-openid<a class="headerlink" href="#extendding-janrain-python-openid" title="Permalink to this headline">¶</a></h3>
<p>=hdknr tried to extend <a class="reference external" href="http://www.janrain.com/">JanRain</a> <a class="reference external" href="http://www.openidenabled.com/python-openid/">python-openid</a> to handle source value in AX <tt class="docutils literal"><span class="pre">fetch_request</span></tt>. The patch is for the version 2.2.4 of <a class="reference external" href="http://www.openidenabled.com/python-openid/">python-openid</a> and is available at <a class="reference external" href="http://code.hdknr.com/OpenID/AX/axx/libdiff.patch">http://code.hdknr.com/OpenID/AX/axx/libdiff.patch</a> .</p>
<p>The patch can be applied to a python-opneid installed in a Python virtualenv environment.</p>
<div class="highlight-bash"><pre>(rp)hdknr@debuniid:~$ cdvirtualenv
(rp)hdknr@debuniid:~/.virtualenvs/rp$ cd lib/python2.5/site-packages/openid/

(rp)hdknr@debuniid:~/.virtualenvs/rp/lib/python2.5/site-packages/openid$ curl http://code.hdknr.com/OpenID/AX/axx/libdiff.patch | grep diff
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0diff -cr --exclude=_darcs --exclude='*.pyc' --exclude=test 2.x.x/openid/extensions/ax.py /home/hdknr/.virtualenvs/ax/lib/python2.5/site-packages/openid/extensions/ax.py
100 14954  100 14954    0     0   9931      0  0:00:01  0:00:01 --:--:-- 12257
(rp)hdknr@debuniid:~/.virtualenvs/rp/lib/python2.5/site-packages/openid$ curl http://code.hdknr.com/OpenID/AX/axx/libdiff.patch | patch -p8 -d .
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 14954  100 14954    0     0  13684      0  0:00:01  0:00:01 --:--:-- 17995
missing header for context diff at line 4 of patch
can't find file to patch at input line 4
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff -cr --exclude=_darcs --exclude='*.pyc' --exclude=test 2.x.x/openid/extensions/ax.py /home/hdknr/.virtualenvs/ax/lib/python2.5/site-packages/openid/extensions/ax.py
|*** 2.x.x/openid/extensions/ax.py      2009-11-11 15:46:56.000000000 +0900
|--- /home/hdknr/.virtualenvs/ax/lib/python2.5/site-packages/openid/extensions/ax.py    2009-11-13 17:53:31.000000000 +0900
--------------------------
File to patch: extensions/ax.py
patching file extensions/ax.py</pre>
</div>
<div class="section" id="code-difference">
<h4>Code difference<a class="headerlink" href="#code-difference" title="Permalink to this headline">¶</a></h4>
<p>Following difference  exists between the original <a class="reference external" href="http://www.janrain.com/">JanRain</a> code and the patch.</p>
<ul class="simple">
<li>If there is no &#8220;value&#8221; specified  to AXKeyValueMessage object, parseExtensionArgs() sets 0 length string to &#8220;value&#8221;.</li>
<li>FetchReqeust is derived from AXKeyValueMessage.</li>
<li>AXKeyValueMessage.__init__(self) is called in FetchRequest.__init__(self).</li>
<li>FetchRequest.getextensionArgs(): If there are values,  those are added to the returning key-value dictionary.</li>
<li>FetchRequest.parseExtensionArgs() calles the base class( AXKeyValueMessage)&#8217;s parseExtensionArgs() at first.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="openid-authentication-artifact-bindings">
<h2>OpenID Authentication : Artifact Bindings<a class="headerlink" href="#openid-authentication-artifact-bindings" title="Permalink to this headline">¶</a></h2>
<p>Because CX documents can be quite large documents, it will be quite difficult for browser to convery safely the whole document indirectly between parties. OpenID CX expects that requesting parties can directly send propsals and receive contracts from OpenID provider. CX documents are able to be safely excanged by OpenID Authentication Artifact Binding, a draft procol which has been submitted to <a class="reference external" href="http://wiki.openid.net/OpenIDwithArtifactBinding">OpenID Wiki</a> as <a class="reference external" href="http://wiki.openid.net/OpenIDwithArtifactBinding">OpenIDwithArtifactBinding</a> by =nat .</p>
<p>OpenID Authentication Artifact Binding can be described in following char:</p>
<img alt="_images/openid_abx.jpg" src="_images/openid_abx.jpg" />
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">CX Protocol</a><ul>
<li><a class="reference external" href="#discovering-openid-cx-service">Discovering OpenID CX Service</a></li>
<li><a class="reference external" href="#exchange-documents-by-openid-ax">Exchange documents by OpenID AX</a><ul>
<li><a class="reference external" href="#adding-value-to-openid-ax-fetch-request">Adding value to OpenID AX  fetch_request</a></li>
<li><a class="reference external" href="#extendding-janrain-python-openid">Extendding JanRain python-openid</a><ul>
<li><a class="reference external" href="#code-difference">Code difference</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="#openid-authentication-artifact-bindings">OpenID Authentication : Artifact Bindings</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="cx_contract.html"
                                  title="previous chapter">CX Contract</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="openid_cx_spec.html"
                                  title="next chapter">1&nbsp;&nbsp;&nbsp;Contract Exchange Extension 1.0 - Draft 1.6</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/cx_protocol.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="openid_cx_spec.html" title="1   Contract Exchange Extension 1.0 - Draft 1.6"
             >next</a> |</li>
        <li class="right" >
          <a href="cx_contract.html" title="CX Contract"
             >previous</a> |</li>
        <li><a href="index.html">cx-doc v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, hdknr.com.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>